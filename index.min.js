!function(){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function(root,factory){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?exports=module.exports=factory(root,document):"function"==typeof define&&define.amd?define("mapsPolyline",factory):root.mapsPolyline=factory(root,document)}("undefined"==typeof window?void 0:window,function(window,document){function mapsPolyline(map,polylinesData,options){function getPins(){return new Promise(function(resolve,reject){var jsonData=polylinesData;setTimeout(function(){resolve(jsonData)},1e3)})}function cleanUpLines(){polylines&&0!==polylines.length&&polylines.map(function(polyline){polyline.setMap(null)})}function cleanUpMarkers(){markers=[]}function addLine(items,color){var coordinates=items.map(function(item){return{lat:parseFloat(item.position.lat),lng:parseFloat(item.position.lng)}}),polyline=new google.maps.Polyline({map:map,path:coordinates,strokeOpacity:0,icons:[{icon:getLineSymbol(color),offset:"0",repeat:"13px"}]});polylines.push(polyline)}function getLineSymbol(color){return{path:"M 0,-1 0,1",scale:3,fillColor:color,strokeColor:color,strokeOpacity:1}}function addMarker(pin,color){var position={lat:parseFloat(pin.position.lat),lng:parseFloat(pin.position.lng)};new google.maps.Marker({map:map,id:pin.id,position:position,animation:google.maps.Animation.DROP,icon:{scale:1,fillOpacity:1,strokeWeight:0,fillColor:color,anchor:new google.maps.Point(0,0),path:"M-6,0a6,6 0 1,0 12,0a6,6 0 1,0 -12,0"}}).onclick=function(){options.callback&&"function"==typeof options.callback&&options.callback()}}var markers=[],polylines=[];!function(){getPins().then(function(pins){return"object"===(void 0===pins?"undefined":_typeof(pins))?pins:JSON.parse(pins)}).then(function(pins){return pins.data}).then(function(pins){if(!pins)return console.error("No data specified"),!1;cleanUpLines(),cleanUpMarkers(),pins.map(function(pin){var items=pin.items,color=pin.color;addLine(items,color),items.map(function(pin){addMarker(pin,color)})})}).catch(function(error){console.error(error)})}()}return mapsPolyline})}();